(()=>{var e={};e.id=8606,e.ids=[8606],e.modules={55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},59796:e=>{"use strict";e.exports=require("zlib")},66440:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>h,originalPathname:()=>m,pages:()=>x,routeModule:()=>u,tree:()=>o});var r=t(73137),l=t(54647),a=t(4183),i=t.n(a),n=t(71775),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);t.d(s,d);let c=r.AppPageRouteModule,o=["",{children:["admin",{children:["orders",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,72495)),"C:\\Users\\ANIKET\\Documents\\jewllery-main\\jewllery-main\\app\\admin\\orders\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,63114)),"C:\\Users\\ANIKET\\Documents\\jewllery-main\\jewllery-main\\app\\admin\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,84075)),"C:\\Users\\ANIKET\\Documents\\jewllery-main\\jewllery-main\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,51918,23)),"next/dist/client/components/not-found-error"]}],x=["C:\\Users\\ANIKET\\Documents\\jewllery-main\\jewllery-main\\app\\admin\\orders\\page.tsx"],m="/admin/orders/page",h={require:t,loadChunk:()=>Promise.resolve()},u=new c({definition:{kind:l.x.APP_PAGE,page:"/admin/orders/page",pathname:"/admin/orders",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},25685:(e,s,t)=>{Promise.resolve().then(t.bind(t,45690))},45690:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>q});var r=t(60080),l=t(9885),a=t(45894),i=t(15441),n=t(96253),d=t(13303),c=t(66908),o=t(69518),x=t(22388),m=t(26303),h=t(59490),u=t(14571),j=t(87094),p=t(68384),g=t(97052),f=t(49424),y=t(33478),v=t(70589),N=t(24796),b=t(51839),w=t(54747),_=t(76466),C=t(25072),P=t(22730),S=t(13899),Z=t(10345);let I=(0,P.createClient)("https://ljvrtryayjlwtankpfrm.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxqdnJ0cnlheWpsd3RhbmtwZnJtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTE5MDU4NDgsImV4cCI6MjA2NzQ4MTg0OH0.ZYrAg7gtynVNnwmeDNgmWVVk0Vgb6thkjDgC_a0jWcM"),O=async()=>{let{data:e,error:s}=await I.from("orders").select("*").order("created_at",{ascending:!1});if(s)throw console.error("Error fetching orders:",s),s;return e};function q(){let[e,s]=(0,l.useState)([]),[t,P]=(0,l.useState)([]),[q,D]=(0,l.useState)(""),[E,A]=(0,l.useState)("all"),[Q,T]=(0,l.useState)("all"),[k,Y]=(0,l.useState)(!1),[U,J]=(0,l.useState)(null),[M,z]=(0,l.useState)(""),[V,L]=(0,l.useState)(""),[R,F]=(0,l.useState)(""),[K,B]=(0,l.useState)(!1),G=(0,C.c)(O,"orders",[]);(0,l.useEffect)(()=>{G&&(s(G),P(G))},[G]),(0,l.useEffect)(()=>{let s=e;q&&(s=s.filter(e=>e.customer_name.toLowerCase().includes(q.toLowerCase())||e.customer_email.toLowerCase().includes(q.toLowerCase())||e.id.toLowerCase().includes(q.toLowerCase()))),"all"!==E&&(s=s.filter(e=>e.status===E)),"all"!==Q&&(s=s.filter(e=>e.payment_status===Q)),P(s)},[e,q,E,Q]);let $=async()=>{if(U){B(!0);try{let e={status:M,updated_at:new Date().toISOString()};V&&(e.notes=V),R&&(e.estimated_delivery=R);let s=await fetch("/api/admin/orders",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:U.id,updateData:e})}),t=await s.json();if(!t.success)throw Error(t.error);await fetch("/api/admin/orders/send-update-email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({orderData:{orderId:U.id,customerName:U.customer_name,customerEmail:U.customer_email,status:M,estimatedDelivery:R,totalAmount:U.total_amount,items:U.items},status:M})}),await I.from("order_tracking").insert({order_id:U.id,status:M,message:V||`Order status updated to ${M}`,created_at:new Date().toISOString()}),Z.ZP.success("Order updated successfully!"),Y(!1),W()}catch(e){console.error("Error updating order:",e),Z.ZP.error("Error updating order")}finally{B(!1)}}},X=e=>{J(e),z(e.status),L(e.notes||""),F(e.estimated_delivery||""),Y(!0)},W=()=>{J(null),z(""),L(""),F("")},H=e=>{let s={pending:"bg-yellow-100 text-yellow-800 border-yellow-200",confirmed:"bg-blue-100 text-blue-800 border-blue-200",processing:"bg-purple-100 text-purple-800 border-purple-200",shipped:"bg-green-100 text-green-800 border-green-200",delivered:"bg-emerald-100 text-emerald-800 border-emerald-200",cancelled:"bg-red-100 text-red-800 border-red-200"};return e in s?s[e]:"bg-gray-100 text-gray-800 border-gray-200"},ee=e=>{let s={pending:"bg-yellow-100 text-yellow-800",paid:"bg-green-100 text-green-800",failed:"bg-red-100 text-red-800"};return e in s?s[e]:"bg-gray-100 text-gray-800"},es={total:e.length,pending:e.filter(e=>"pending"===e.status).length,confirmed:e.filter(e=>"confirmed"===e.status).length,shipped:e.filter(e=>"shipped"===e.status).length,delivered:e.filter(e=>"delivered"===e.status).length,totalRevenue:e.reduce((e,s)=>e+s.total_amount,0)},et=async e=>{if(confirm("Are you sure you want to delete this order?")){B(!0);try{let t=await fetch("/api/admin/orders",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e})}),r=await t.json();if(!r.success)throw Error(r.error);Z.ZP.success("Order deleted successfully!");let l=await O();s(l),P(l)}catch(e){console.error("Error deleting order:",e),Z.ZP.error("Error deleting order")}finally{B(!1)}}};return(0,r.jsxs)("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex items-center justify-between",children:(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Orders Management"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Track and manage customer orders"})]})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[r.jsx(g.Zb,{children:r.jsx(g.aY,{className:"p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Orders"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:es.total})]}),r.jsx(a.Z,{className:"h-8 w-8 text-blue-600"})]})})}),r.jsx(g.Zb,{children:r.jsx(g.aY,{className:"p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pending"}),r.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:es.pending})]}),r.jsx(i.Z,{className:"h-8 w-8 text-yellow-600"})]})})}),r.jsx(g.Zb,{children:r.jsx(g.aY,{className:"p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Confirmed"}),r.jsx("p",{className:"text-2xl font-bold text-blue-600",children:es.confirmed})]}),r.jsx(n.Z,{className:"h-8 w-8 text-blue-600"})]})})}),r.jsx(g.Zb,{children:r.jsx(g.aY,{className:"p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Shipped"}),r.jsx("p",{className:"text-2xl font-bold text-green-600",children:es.shipped})]}),r.jsx(d.Z,{className:"h-8 w-8 text-green-600"})]})})}),r.jsx(g.Zb,{children:r.jsx(g.aY,{className:"p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Revenue"}),r.jsx("p",{className:"text-lg font-bold text-green-600",children:(0,S.x)(es.totalRevenue)})]}),r.jsx(c.Z,{className:"h-8 w-8 text-green-600"})]})})})]}),r.jsx(g.Zb,{children:r.jsx(g.aY,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[r.jsx("div",{className:"flex-1",children:(0,r.jsxs)("div",{className:"relative",children:[r.jsx(o.Z,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"}),r.jsx(f.I,{placeholder:"Search orders...",value:q,onChange:e=>D(e.target.value),className:"pl-10"})]})}),(0,r.jsxs)(v.Ph,{value:E,onValueChange:A,children:[r.jsx(v.i4,{className:"w-full md:w-48",children:r.jsx(v.ki,{placeholder:"All Status"})}),(0,r.jsxs)(v.Bw,{children:[r.jsx(v.Ql,{value:"all",children:"All Status"}),r.jsx(v.Ql,{value:"pending",children:"Pending"}),r.jsx(v.Ql,{value:"confirmed",children:"Confirmed"}),r.jsx(v.Ql,{value:"processing",children:"Processing"}),r.jsx(v.Ql,{value:"shipped",children:"Shipped"}),r.jsx(v.Ql,{value:"delivered",children:"Delivered"}),r.jsx(v.Ql,{value:"cancelled",children:"Cancelled"})]})]}),(0,r.jsxs)(v.Ph,{value:Q,onValueChange:T,children:[r.jsx(v.i4,{className:"w-full md:w-48",children:r.jsx(v.ki,{placeholder:"Payment Status"})}),(0,r.jsxs)(v.Bw,{children:[r.jsx(v.Ql,{value:"all",children:"All Payments"}),r.jsx(v.Ql,{value:"pending",children:"Pending"}),r.jsx(v.Ql,{value:"paid",children:"Paid"}),r.jsx(v.Ql,{value:"failed",children:"Failed"})]})]})]})})}),(0,r.jsxs)(g.Zb,{children:[r.jsx(g.Ol,{children:(0,r.jsxs)(g.ll,{className:"flex items-center gap-2",children:[r.jsx(a.Z,{className:"h-5 w-5"}),"Orders (",t.length,")"]})}),(0,r.jsxs)(g.aY,{children:[(0,r.jsxs)(w.iA,{children:[r.jsx(w.xD,{children:(0,r.jsxs)(w.SC,{children:[r.jsx(w.ss,{children:"Order ID"}),r.jsx(w.ss,{children:"Customer"}),r.jsx(w.ss,{children:"Items"}),r.jsx(w.ss,{children:"Amount"}),r.jsx(w.ss,{children:"Payment"}),r.jsx(w.ss,{children:"Status"}),r.jsx(w.ss,{children:"Date"}),r.jsx(w.ss,{children:"Actions"})]})}),r.jsx(w.RM,{children:t.map(e=>(0,r.jsxs)(w.SC,{children:[r.jsx(w.pj,{children:r.jsx("div",{className:"font-mono text-sm",children:e.id.slice(0,8)})}),r.jsx(w.pj,{children:(0,r.jsxs)("div",{children:[r.jsx("div",{className:"font-medium",children:e.customer_name}),r.jsx("div",{className:"text-sm text-gray-500",children:e.customer_email})]})}),r.jsx(w.pj,{children:(0,r.jsxs)("div",{className:"text-sm",children:[e.items?.length||0," items"]})}),(0,r.jsxs)(w.pj,{children:[r.jsx("div",{className:"font-medium",children:(0,S.x)(e.total_amount)}),r.jsx("div",{className:"text-xs text-gray-500",children:e.payment_method?.toUpperCase()})]}),r.jsx(w.pj,{children:r.jsx(N.C,{className:ee(e.payment_status),children:e.payment_status})}),r.jsx(w.pj,{children:r.jsx(N.C,{className:H(e.status),children:e.status})}),r.jsx(w.pj,{children:new Date(e.created_at).toLocaleDateString()}),r.jsx(w.pj,{children:(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx(p.z,{variant:"ghost",size:"icon",onClick:()=>X(e),children:r.jsx(x.Z,{className:"h-4 w-4"})}),r.jsx(p.z,{variant:"ghost",size:"icon",onClick:()=>et(e.id),className:"text-red-600 hover:text-red-700",children:r.jsx(m.Z,{className:"h-4 w-4"})})]})})]},e.id))})]}),0===t.length&&(0,r.jsxs)("div",{className:"text-center py-12",children:[r.jsx(a.Z,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No orders found"}),r.jsx("p",{className:"text-gray-500",children:"Try adjusting your search or filters"})]})]})]}),r.jsx(b.Vq,{open:k,onOpenChange:Y,children:(0,r.jsxs)(b.cZ,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,r.jsxs)(b.fK,{children:[r.jsx(b.$N,{children:"Order Details"}),r.jsx(b.Be,{children:"View and update order information"})]}),U&&(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)(g.Zb,{children:[r.jsx(g.Ol,{children:r.jsx(g.ll,{className:"text-lg",children:"Customer Information"})}),(0,r.jsxs)(g.aY,{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx(h.Z,{className:"h-4 w-4 text-gray-400"}),r.jsx("span",{children:U.customer_email})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[r.jsx(u.Z,{className:"h-4 w-4 text-gray-400"}),r.jsx("span",{children:U.customer_phone})]}),(0,r.jsxs)("div",{className:"flex items-start gap-2",children:[r.jsx(j.Z,{className:"h-4 w-4 text-gray-400 mt-1"}),r.jsx("span",{className:"text-sm",children:U.customer_address})]})]})]}),(0,r.jsxs)(g.Zb,{children:[r.jsx(g.Ol,{children:r.jsx(g.ll,{className:"text-lg",children:"Order Information"})}),(0,r.jsxs)(g.aY,{className:"space-y-3",children:[(0,r.jsxs)("div",{children:[r.jsx("span",{className:"text-sm text-gray-500",children:"Order ID:"}),r.jsx("div",{className:"font-mono",children:U.id})]}),(0,r.jsxs)("div",{children:[r.jsx("span",{className:"text-sm text-gray-500",children:"Total Amount:"}),r.jsx("div",{className:"font-bold text-lg",children:(0,S.x)(U.total_amount)})]}),(0,r.jsxs)("div",{children:[r.jsx("span",{className:"text-sm text-gray-500",children:"Payment Method:"}),r.jsx("div",{className:"uppercase",children:U.payment_method})]}),(0,r.jsxs)("div",{children:[r.jsx("span",{className:"text-sm text-gray-500",children:"Created:"}),r.jsx("div",{children:new Date(U.created_at).toLocaleString()})]})]})]})]}),(0,r.jsxs)(g.Zb,{children:[r.jsx(g.Ol,{children:r.jsx(g.ll,{className:"text-lg",children:"Order Items"})}),r.jsx(g.aY,{children:r.jsx("div",{className:"space-y-3",children:U.items?.map((e,s)=>r.jsxs("div",{className:"flex justify-between items-center p-3 border rounded-lg",children:[r.jsxs("div",{children:[r.jsx("div",{className:"font-medium",children:e.name}),r.jsxs("div",{className:"text-sm text-gray-500",children:["Quantity: ",e.quantity]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("div",{className:"font-medium",children:S.x(e.price*e.quantity)}),r.jsxs("div",{className:"text-sm text-gray-500",children:[S.x(e.price)," each"]})]})]},s))})})]}),(0,r.jsxs)(g.Zb,{children:[r.jsx(g.Ol,{children:r.jsx(g.ll,{className:"text-lg",children:"Update Order"})}),(0,r.jsxs)(g.aY,{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[r.jsx(y._,{htmlFor:"status",children:"Order Status"}),(0,r.jsxs)(v.Ph,{value:M,onValueChange:z,children:[r.jsx(v.i4,{children:r.jsx(v.ki,{})}),(0,r.jsxs)(v.Bw,{children:[r.jsx(v.Ql,{value:"pending",children:"Pending"}),r.jsx(v.Ql,{value:"confirmed",children:"Confirmed"}),r.jsx(v.Ql,{value:"processing",children:"Processing"}),r.jsx(v.Ql,{value:"shipped",children:"Shipped"}),r.jsx(v.Ql,{value:"delivered",children:"Delivered"}),r.jsx(v.Ql,{value:"cancelled",children:"Cancelled"})]})]})]}),(0,r.jsxs)("div",{children:[r.jsx(y._,{htmlFor:"estimated_delivery",children:"Estimated Delivery"}),r.jsx(f.I,{id:"estimated_delivery",type:"date",value:R,onChange:e=>F(e.target.value)})]}),(0,r.jsxs)("div",{children:[r.jsx(y._,{htmlFor:"notes",children:"Admin Notes"}),r.jsx(_.g,{id:"notes",value:V,onChange:e=>L(e.target.value),placeholder:"Add notes about this order...",rows:3})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-4",children:[r.jsx(p.z,{variant:"outline",onClick:()=>Y(!1),children:"Cancel"}),r.jsx(p.z,{onClick:$,disabled:K,className:"bg-gradient-to-r from-amber-600 to-orange-600 hover:from-amber-700 hover:to-orange-700",children:K?"Updating...":"Update Order"})]})]})]})]})]})})]})}},76466:(e,s,t)=>{"use strict";t.d(s,{g:()=>i});var r=t(60080),l=t(9885),a=t(23161);let i=l.forwardRef(({className:e,...s},t)=>r.jsx("textarea",{className:(0,a.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:t,...s}));i.displayName="Textarea"},13899:(e,s,t)=>{"use strict";function r(e){return`₹${new Intl.NumberFormat("en-US").format(e)}`}t.d(s,{x:()=>r})},72495:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>i,__esModule:()=>a,default:()=>d});var r=t(17536);let l=(0,r.createProxy)(String.raw`C:\Users\ANIKET\Documents\jewllery-main\jewllery-main\app\admin\orders\page.tsx`),{__esModule:a,$$typeof:i}=l,n=l.default,d=n}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[3447,1971,2451,6206,5138,4745,2730,7589,7888,5247,8203,823,2903,558,8213,1557,6261,8384,4796,7052,2065,1839,9378,2970,6777,589,5072,4747],()=>t(66440));module.exports=r})();