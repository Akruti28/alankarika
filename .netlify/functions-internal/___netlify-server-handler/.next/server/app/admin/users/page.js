(()=>{var e={};e.id=9674,e.ids=[9674],e.modules={55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},59796:e=>{"use strict";e.exports=require("zlib")},13778:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>m,routeModule:()=>p,tree:()=>c});var r=t(73137),a=t(54647),l=t(4183),i=t.n(l),n=t(71775),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);t.d(s,d);let o=r.AppPageRouteModule,c=["",{children:["admin",{children:["users",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,16776)),"C:\\Users\\ANIKET\\Documents\\jewllery-main\\jewllery-main\\app\\admin\\users\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,63114)),"C:\\Users\\ANIKET\\Documents\\jewllery-main\\jewllery-main\\app\\admin\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,84075)),"C:\\Users\\ANIKET\\Documents\\jewllery-main\\jewllery-main\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,51918,23)),"next/dist/client/components/not-found-error"]}],m=["C:\\Users\\ANIKET\\Documents\\jewllery-main\\jewllery-main\\app\\admin\\users\\page.tsx"],u="/admin/users/page",x={require:t,loadChunk:()=>Promise.resolve()},p=new o({definition:{kind:a.x.APP_PAGE,page:"/admin/users/page",pathname:"/admin/users",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},68203:(e,s,t)=>{Promise.resolve().then(t.bind(t,17498))},17498:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>O});var r=t(60080),a=t(9885),l=t(97018),i=t(91672),n=t(44901),d=t(69518),o=t(1611),c=t(34010),m=t(26303),u=t(68384),x=t(97052),p=t(49424),h=t(33478),f=t(70589),j=t(24796),g=t(51839),y=t(54747),N=t(75051),w=t(11922),v=t(1264),b=t(74151),C=t(23161);let _=N.fC,Z=N.xz;N.ZA,N.Uv,N.Tr,N.Ee;let q=a.forwardRef(({className:e,inset:s,children:t,...a},l)=>(0,r.jsxs)(N.fF,{ref:l,className:(0,C.cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",s&&"pl-8",e),...a,children:[t,r.jsx(w.Z,{className:"ml-auto h-4 w-4"})]}));q.displayName=N.fF.displayName;let U=a.forwardRef(({className:e,...s},t)=>r.jsx(N.tu,{ref:t,className:(0,C.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...s}));U.displayName=N.tu.displayName;let E=a.forwardRef(({className:e,sideOffset:s=4,...t},a)=>r.jsx(N.Uv,{children:r.jsx(N.VY,{ref:a,sideOffset:s,className:(0,C.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t})}));E.displayName=N.VY.displayName;let I=a.forwardRef(({className:e,inset:s,...t},a)=>r.jsx(N.ck,{ref:a,className:(0,C.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s&&"pl-8",e),...t}));I.displayName=N.ck.displayName;let A=a.forwardRef(({className:e,children:s,checked:t,...a},l)=>(0,r.jsxs)(N.oC,{ref:l,className:(0,C.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:t,...a,children:[r.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx(N.wU,{children:r.jsx(v.Z,{className:"h-4 w-4"})})}),s]}));A.displayName=N.oC.displayName;let P=a.forwardRef(({className:e,children:s,...t},a)=>(0,r.jsxs)(N.Rk,{ref:a,className:(0,C.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...t,children:[r.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx(N.wU,{children:r.jsx(b.Z,{className:"h-2 w-2 fill-current"})})}),s]}));P.displayName=N.Rk.displayName;let S=a.forwardRef(({className:e,inset:s,...t},a)=>r.jsx(N.__,{ref:a,className:(0,C.cn)("px-2 py-1.5 text-sm font-semibold",s&&"pl-8",e),...t}));S.displayName=N.__.displayName;let k=a.forwardRef(({className:e,...s},t)=>r.jsx(N.Z0,{ref:t,className:(0,C.cn)("-mx-1 my-1 h-px bg-muted",e),...s}));k.displayName=N.Z0.displayName;var D=t(25072),R=t(22730),z=t(10345);let M=(0,R.createClient)("https://ljvrtryayjlwtankpfrm.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxqdnJ0cnlheWpsd3RhbmtwZnJtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTE5MDU4NDgsImV4cCI6MjA2NzQ4MTg0OH0.ZYrAg7gtynVNnwmeDNgmWVVk0Vgb6thkjDgC_a0jWcM"),T=async()=>{let{data:e,error:s}=await M.from("profiles").select("*").order("created_at",{ascending:!1});if(s)throw console.error("Error fetching users:",s),s;return e};function O(){let[e,s]=(0,a.useState)([]),[t,N]=(0,a.useState)([]),[w,v]=(0,a.useState)(""),[b,C]=(0,a.useState)("all"),[q,U]=(0,a.useState)(!1),[A,P]=(0,a.useState)(!1),[S,k]=(0,a.useState)({}),[R,O]=(0,a.useState)(!1),V=(0,D.c)(T,"profiles",[]);(0,a.useEffect)(()=>{V&&(s(V),N(V))},[V]),(0,a.useEffect)(()=>{let s=e;w&&(s=s.filter(e=>e.full_name?.toLowerCase().includes(w.toLowerCase())||e.email?.toLowerCase().includes(w.toLowerCase()))),"all"!==b&&(s=s.filter(e=>e.role===b)),N(s)},[e,w,b]);let J=async e=>{e.preventDefault(),O(!0);try{let e={email:S.email,full_name:S.full_name,role:S.role||"customer",updated_at:new Date().toISOString()};if(A&&S.id){let{error:s}=await M.from("profiles").update(e).eq("id",S.id);if(s)throw s;z.ZP.success("User updated successfully!")}else{let{error:s}=await M.from("profiles").insert([{...e,created_at:new Date().toISOString()}]);if(s)throw s;z.ZP.success("User created successfully!")}U(!1),Q()}catch(e){console.error("Error saving user:",e),z.ZP.error("Error saving user")}finally{O(!1)}},Y=e=>{k(e),P(!0),U(!0)},L=async(e,s)=>{try{let{error:t}=await M.from("profiles").update({role:s,updated_at:new Date().toISOString()}).eq("id",e);if(t)throw t;z.ZP.success(`User role updated to ${s}!`)}catch(e){console.error("Error updating user role:",e),z.ZP.error("Error updating user role")}},F=async e=>{if(confirm("Are you sure you want to delete this user?")){O(!0);try{let t=await fetch("/api/admin?type=user",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e})}),r=await t.json();if(!r.success)throw Error(r.error);z.ZP.success("User deleted successfully!");let a=await T();s(a),N(a)}catch(e){console.error("Error deleting user:",e),z.ZP.error("Error deleting user")}finally{O(!1)}}},Q=()=>{k({}),P(!1)},K=e=>{switch(e){case"admin":return"bg-red-100 text-red-800";case"customer":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}};return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Users Management"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Manage user accounts and permissions"})]}),(0,r.jsxs)(g.Vq,{open:q,onOpenChange:U,children:[r.jsx(g.hg,{asChild:!0,children:(0,r.jsxs)(u.z,{className:"bg-gradient-to-r from-amber-600 to-orange-600 hover:from-amber-700 hover:to-orange-700",onClick:Q,children:[r.jsx(l.Z,{className:"h-4 w-4 mr-2"}),"Add User"]})}),(0,r.jsxs)(g.cZ,{className:"max-w-md",children:[(0,r.jsxs)(g.fK,{children:[r.jsx(g.$N,{children:A?"Edit User":"Add New User"}),r.jsx(g.Be,{children:A?"Update user information and permissions":"Create a new user account"})]}),(0,r.jsxs)("form",{onSubmit:J,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[r.jsx(h._,{htmlFor:"email",children:"Email *"}),r.jsx(p.I,{id:"email",type:"email",value:S.email||"",onChange:e=>k(s=>({...s,email:e.target.value})),placeholder:"user@example.com",required:!0,disabled:A})]}),(0,r.jsxs)("div",{children:[r.jsx(h._,{htmlFor:"full_name",children:"Full Name *"}),r.jsx(p.I,{id:"full_name",value:S.full_name||"",onChange:e=>k(s=>({...s,full_name:e.target.value})),placeholder:"Enter full name",required:!0})]}),(0,r.jsxs)("div",{children:[r.jsx(h._,{htmlFor:"role",children:"Role *"}),(0,r.jsxs)(f.Ph,{value:S.role||"customer",onValueChange:e=>k(s=>({...s,role:e})),children:[r.jsx(f.i4,{children:r.jsx(f.ki,{})}),(0,r.jsxs)(f.Bw,{children:[r.jsx(f.Ql,{value:"customer",children:"Customer"}),r.jsx(f.Ql,{value:"admin",children:"Admin"})]})]})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-4",children:[r.jsx(u.z,{type:"button",variant:"outline",onClick:()=>U(!1),children:"Cancel"}),r.jsx(u.z,{type:"submit",disabled:R,className:"bg-gradient-to-r from-amber-600 to-orange-600 hover:from-amber-700 hover:to-orange-700",children:R?"Saving...":A?"Update User":"Create User"})]})]})]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsx(x.Zb,{children:r.jsx(x.aY,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Users"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.length})]}),r.jsx(i.Z,{className:"h-8 w-8 text-blue-600"})]})})}),r.jsx(x.Zb,{children:r.jsx(x.aY,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Customers"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.filter(e=>"customer"===e.role).length})]}),r.jsx(i.Z,{className:"h-8 w-8 text-green-600"})]})})}),r.jsx(x.Zb,{children:r.jsx(x.aY,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Admins"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.filter(e=>"admin"===e.role).length})]}),r.jsx(n.Z,{className:"h-8 w-8 text-red-600"})]})})})]}),r.jsx(x.Zb,{children:r.jsx(x.aY,{className:"p-6",children:(0,r.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[r.jsx("div",{className:"flex-1",children:(0,r.jsxs)("div",{className:"relative",children:[r.jsx(d.Z,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"}),r.jsx(p.I,{placeholder:"Search users...",value:w,onChange:e=>v(e.target.value),className:"pl-10"})]})}),(0,r.jsxs)(f.Ph,{value:b,onValueChange:C,children:[r.jsx(f.i4,{className:"w-full md:w-48",children:r.jsx(f.ki,{placeholder:"All Roles"})}),(0,r.jsxs)(f.Bw,{children:[r.jsx(f.Ql,{value:"all",children:"All Roles"}),r.jsx(f.Ql,{value:"customer",children:"Customers"}),r.jsx(f.Ql,{value:"admin",children:"Admins"})]})]})]})})}),(0,r.jsxs)(x.Zb,{children:[r.jsx(x.Ol,{children:(0,r.jsxs)(x.ll,{className:"flex items-center gap-2",children:[r.jsx(i.Z,{className:"h-5 w-5"}),"Users (",t.length,")"]})}),(0,r.jsxs)(x.aY,{children:[(0,r.jsxs)(y.iA,{children:[r.jsx(y.xD,{children:(0,r.jsxs)(y.SC,{children:[r.jsx(y.ss,{children:"User"}),r.jsx(y.ss,{children:"Role"}),r.jsx(y.ss,{children:"Created"}),r.jsx(y.ss,{children:"Last Updated"}),r.jsx(y.ss,{children:"Actions"})]})}),r.jsx(y.RM,{children:t.map(e=>(0,r.jsxs)(y.SC,{children:[r.jsx(y.pj,{children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-white font-medium text-sm",children:e.full_name?.charAt(0)||e.email?.charAt(0)||"U"})}),(0,r.jsxs)("div",{children:[r.jsx("div",{className:"font-medium",children:e.full_name||"No name"}),r.jsx("div",{className:"text-sm text-gray-500",children:e.email})]})]})}),r.jsx(y.pj,{children:r.jsx(j.C,{className:K(e.role),children:e.role})}),r.jsx(y.pj,{children:new Date(e.created_at).toLocaleDateString()}),r.jsx(y.pj,{children:new Date(e.updated_at).toLocaleDateString()}),r.jsx(y.pj,{children:(0,r.jsxs)(_,{children:[r.jsx(Z,{asChild:!0,children:r.jsx(u.z,{variant:"ghost",size:"icon",children:r.jsx(o.Z,{className:"h-4 w-4"})})}),(0,r.jsxs)(E,{align:"end",children:[(0,r.jsxs)(I,{onClick:()=>Y(e),children:[r.jsx(c.Z,{className:"h-4 w-4 mr-2"}),"Edit User"]}),(0,r.jsxs)(I,{onClick:()=>L(e.id,"admin"===e.role?"customer":"admin"),children:[r.jsx(n.Z,{className:"h-4 w-4 mr-2"}),"admin"===e.role?"Make Customer":"Make Admin"]}),(0,r.jsxs)(I,{onClick:()=>F(e.id),className:"text-red-600",children:[r.jsx(m.Z,{className:"h-4 w-4 mr-2"}),"Delete User"]})]})]})})]},e.id))})]}),0===t.length&&(0,r.jsxs)("div",{className:"text-center py-12",children:[r.jsx(i.Z,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No users found"}),r.jsx("p",{className:"text-gray-500",children:"Try adjusting your search or filters"})]})]})]})]})}},16776:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>i,__esModule:()=>l,default:()=>d});var r=t(17536);let a=(0,r.createProxy)(String.raw`C:\Users\ANIKET\Documents\jewllery-main\jewllery-main\app\admin\users\page.tsx`),{__esModule:l,$$typeof:i}=a,n=a.default,d=n}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),r=s.X(0,[3447,1971,2451,6206,5138,4745,2730,7589,7888,5247,8203,823,2903,558,433,7228,6261,8384,4796,7052,2065,1839,9378,2970,6777,589,5072,4747],()=>t(13778));module.exports=r})();