(()=>{var e={};e.id=6159,e.ids=[6159],e.modules={55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},59796:e=>{"use strict";e.exports=require("zlib")},49537:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>a.a,__next_app__:()=>p,originalPathname:()=>h,pages:()=>x,routeModule:()=>u,tree:()=>o});var t=r(73137),i=r(54647),n=r(4183),a=r.n(n),l=r(71775),d={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);r.d(s,d);let c=t.AppPageRouteModule,o=["",{children:["admin",{children:["shipping",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,33403)),"C:\\Users\\ANIKET\\Documents\\jewllery-main\\jewllery-main\\app\\admin\\shipping\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,63114)),"C:\\Users\\ANIKET\\Documents\\jewllery-main\\jewllery-main\\app\\admin\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,84075)),"C:\\Users\\ANIKET\\Documents\\jewllery-main\\jewllery-main\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,51918,23)),"next/dist/client/components/not-found-error"]}],x=["C:\\Users\\ANIKET\\Documents\\jewllery-main\\jewllery-main\\app\\admin\\shipping\\page.tsx"],h="/admin/shipping/page",p={require:r,loadChunk:()=>Promise.resolve()},u=new c({definition:{kind:i.x.APP_PAGE,page:"/admin/shipping/page",pathname:"/admin/shipping",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},10186:(e,s,r)=>{Promise.resolve().then(r.bind(r,12798))},12798:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>D});var t=r(60080),i=r(9885),n=r(37004),a=r(15441),l=r(13303),d=r(99145),c=r(96253),o=r(69518),x=r(34010),h=r(26303),p=r(68384),u=r(97052),m=r(49424),g=r(33478),j=r(70589),v=r(24796),f=r(51839),y=r(54747),b=r(76466),N=r(25072),_=r(22730),w=r(13899),S=r(10345);let C=(0,_.createClient)("https://ljvrtryayjlwtankpfrm.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxqdnJ0cnlheWpsd3RhbmtwZnJtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTE5MDU4NDgsImV4cCI6MjA2NzQ4MTg0OH0.ZYrAg7gtynVNnwmeDNgmWVVk0Vgb6thkjDgC_a0jWcM"),I=async()=>{let{data:e,error:s}=await C.from("shipping").select(`
      *,
      orders!inner(
        id,
        customer_name,
        customer_email,
        customer_phone,
        total_amount
      )
    `).order("created_at",{ascending:!1});if(s)throw console.error("Error fetching shipping records:",s),s;return e};function D(){let[e,s]=(0,i.useState)([]),[r,_]=(0,i.useState)([]),[D,k]=(0,i.useState)(""),[P,E]=(0,i.useState)("all"),[Z,q]=(0,i.useState)(!1),[Q,T]=(0,i.useState)(null),[O,A]=(0,i.useState)(""),[U,L]=(0,i.useState)(""),[J,Y]=(0,i.useState)(""),[z,M]=(0,i.useState)(""),[F,V]=(0,i.useState)(""),[B,R]=(0,i.useState)(!1),$=(0,N.c)(I,"shipping",[]);(0,i.useEffect)(()=>{$&&(s($),_($))},[$]),(0,i.useEffect)(()=>{let s=e;D&&(s=s.filter(e=>e.tracking_number?.toLowerCase().includes(D.toLowerCase())||e.order?.customer_name?.toLowerCase().includes(D.toLowerCase())||e.order?.customer_email?.toLowerCase().includes(D.toLowerCase())||e.order_id.toLowerCase().includes(D.toLowerCase()))),"all"!==P&&(s=s.filter(e=>e.status===P)),_(s)},[e,D,P]);let K=async()=>{if(Q){R(!0);try{let e={tracking_number:O,shipping_provider:U,status:J,estimated_delivery:z,notes:F,updated_at:new Date().toISOString()};"shipped"===J&&"shipped"!==Q.status&&(e.shipped_at=new Date().toISOString()),"delivered"===J&&"delivered"!==Q.status&&(e.delivered_at=new Date().toISOString());let s=await fetch("/api/admin/shipping",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:Q.id,data:e})}),r=await s.json();if(!r.success)throw Error(r.error);Q.order&&await fetch("/api/admin/shipping/send-update-email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({orderId:Q.order_id,customerName:Q.order.customer_name,customerEmail:Q.order.customer_email,trackingNumber:O,shippingProvider:U,status:J,estimatedDelivery:z,trackingUrl:`https://track.${U.toLowerCase()}.com/${O}`})}),await C.from("notifications").insert({type:"shipping_update",title:"Shipping Update",message:`Your order shipping status has been updated to: ${J}`,recipient_email:Q.order?.customer_email,recipient_name:Q.order?.customer_name,data:{orderId:Q.order_id,trackingNumber:O,status:J}}),S.ZP.success("Shipping information updated successfully!"),q(!1),H()}catch(e){console.error("Error updating shipping:",e),S.ZP.error("Error updating shipping information")}finally{R(!1)}}},G=e=>{T(e),A(e.tracking_number||""),L(e.shipping_provider||"BlueDart"),Y(e.status),M(e.estimated_delivery||""),V(e.notes||""),q(!0)},X=async e=>{if(confirm("Are you sure you want to delete this shipping record?")){R(!0);try{let r=await fetch("/api/admin/shipping",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e})}),t=await r.json();if(!t.success)throw Error(t.error);S.ZP.success("Shipping record deleted successfully!");let i=await I();s(i),_(i)}catch(e){console.error("Error deleting shipping record:",e),S.ZP.error("Error deleting shipping record")}finally{R(!1)}}},H=()=>{T(null),A(""),L(""),Y(""),M(""),V("")},W=e=>{let s={pending:"bg-yellow-100 text-yellow-800 border-yellow-200",packed:"bg-blue-100 text-blue-800 border-blue-200",shipped:"bg-purple-100 text-purple-800 border-purple-200",in_transit:"bg-indigo-100 text-indigo-800 border-indigo-200",out_for_delivery:"bg-orange-100 text-orange-800 border-orange-200",delivered:"bg-green-100 text-green-800 border-green-200",returned:"bg-red-100 text-red-800 border-red-200",cancelled:"bg-gray-100 text-gray-800 border-gray-200"};return e in s?s[e]:"bg-gray-100 text-gray-800 border-gray-200"},ee={total:e.length,pending:e.filter(e=>"pending"===e.status).length,shipped:e.filter(e=>"shipped"===e.status).length,in_transit:e.filter(e=>"in_transit"===e.status).length,delivered:e.filter(e=>"delivered"===e.status).length};return(0,t.jsxs)("div",{className:"space-y-6",children:[t.jsx("div",{className:"flex items-center justify-between",children:(0,t.jsxs)("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Shipping Management"}),t.jsx("p",{className:"text-gray-600 mt-1",children:"Track and manage order shipments"})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[t.jsx(u.Zb,{children:t.jsx(u.aY,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Shipments"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:ee.total})]}),t.jsx(n.Z,{className:"h-8 w-8 text-blue-600"})]})})}),t.jsx(u.Zb,{children:t.jsx(u.aY,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pending"}),t.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:ee.pending})]}),t.jsx(a.Z,{className:"h-8 w-8 text-yellow-600"})]})})}),t.jsx(u.Zb,{children:t.jsx(u.aY,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Shipped"}),t.jsx("p",{className:"text-2xl font-bold text-purple-600",children:ee.shipped})]}),t.jsx(l.Z,{className:"h-8 w-8 text-purple-600"})]})})}),t.jsx(u.Zb,{children:t.jsx(u.aY,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"In Transit"}),t.jsx("p",{className:"text-2xl font-bold text-indigo-600",children:ee.in_transit})]}),t.jsx(d.Z,{className:"h-8 w-8 text-indigo-600"})]})})}),t.jsx(u.Zb,{children:t.jsx(u.aY,{className:"p-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Delivered"}),t.jsx("p",{className:"text-2xl font-bold text-green-600",children:ee.delivered})]}),t.jsx(c.Z,{className:"h-8 w-8 text-green-600"})]})})})]}),t.jsx(u.Zb,{children:t.jsx(u.aY,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[t.jsx("div",{className:"flex-1",children:(0,t.jsxs)("div",{className:"relative",children:[t.jsx(o.Z,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"}),t.jsx(m.I,{placeholder:"Search by tracking number, customer, or order ID...",value:D,onChange:e=>k(e.target.value),className:"pl-10"})]})}),(0,t.jsxs)(j.Ph,{value:P,onValueChange:E,children:[t.jsx(j.i4,{className:"w-full md:w-48",children:t.jsx(j.ki,{placeholder:"All Status"})}),(0,t.jsxs)(j.Bw,{children:[t.jsx(j.Ql,{value:"all",children:"All Status"}),t.jsx(j.Ql,{value:"pending",children:"Pending"}),t.jsx(j.Ql,{value:"packed",children:"Packed"}),t.jsx(j.Ql,{value:"shipped",children:"Shipped"}),t.jsx(j.Ql,{value:"in_transit",children:"In Transit"}),t.jsx(j.Ql,{value:"out_for_delivery",children:"Out for Delivery"}),t.jsx(j.Ql,{value:"delivered",children:"Delivered"}),t.jsx(j.Ql,{value:"returned",children:"Returned"}),t.jsx(j.Ql,{value:"cancelled",children:"Cancelled"})]})]})]})})}),(0,t.jsxs)(u.Zb,{children:[t.jsx(u.Ol,{children:(0,t.jsxs)(u.ll,{className:"flex items-center gap-2",children:[t.jsx(l.Z,{className:"h-5 w-5"}),"Shipments (",r.length,")"]})}),(0,t.jsxs)(u.aY,{children:[(0,t.jsxs)(y.iA,{children:[t.jsx(y.xD,{children:(0,t.jsxs)(y.SC,{children:[t.jsx(y.ss,{children:"Order ID"}),t.jsx(y.ss,{children:"Customer"}),t.jsx(y.ss,{children:"Tracking Number"}),t.jsx(y.ss,{children:"Provider"}),t.jsx(y.ss,{children:"Status"}),t.jsx(y.ss,{children:"Estimated Delivery"}),t.jsx(y.ss,{children:"Actions"})]})}),t.jsx(y.RM,{children:r.map(e=>(0,t.jsxs)(y.SC,{children:[t.jsx(y.pj,{children:t.jsx("div",{className:"font-mono text-sm",children:e.order_id.slice(0,8)})}),t.jsx(y.pj,{children:(0,t.jsxs)("div",{children:[t.jsx("div",{className:"font-medium",children:e.order?.customer_name}),t.jsx("div",{className:"text-sm text-gray-500",children:e.order?.customer_email})]})}),t.jsx(y.pj,{children:t.jsx("div",{className:"font-mono",children:e.tracking_number||"Not assigned"})}),t.jsx(y.pj,{children:e.shipping_provider||"Not assigned"}),t.jsx(y.pj,{children:t.jsx(v.C,{className:W(e.status),children:e.status.replace("_"," ")})}),t.jsx(y.pj,{children:e.estimated_delivery?new Date(e.estimated_delivery).toLocaleDateString():"Not set"}),(0,t.jsxs)(y.pj,{children:[t.jsx(p.z,{variant:"ghost",size:"icon",onClick:()=>G(e),children:t.jsx(x.Z,{className:"h-4 w-4"})}),t.jsx(p.z,{variant:"ghost",size:"icon",onClick:()=>X(e.id),className:"text-red-600 hover:text-red-700",children:t.jsx(h.Z,{className:"h-4 w-4"})})]})]},e.id))})]}),0===r.length&&(0,t.jsxs)("div",{className:"text-center py-12",children:[t.jsx(l.Z,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No shipments found"}),t.jsx("p",{className:"text-gray-500",children:"Try adjusting your search or filters"})]})]})]}),t.jsx(f.Vq,{open:Z,onOpenChange:q,children:(0,t.jsxs)(f.cZ,{className:"max-w-2xl",children:[(0,t.jsxs)(f.fK,{children:[t.jsx(f.$N,{children:"Update Shipping Information"}),t.jsx(f.Be,{children:"Update tracking and delivery information for this order"})]}),Q&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)(u.Zb,{children:[t.jsx(u.Ol,{children:t.jsx(u.ll,{className:"text-lg",children:"Order Information"})}),t.jsx(u.aY,{className:"space-y-3",children:(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[t.jsx("span",{className:"text-sm text-gray-500",children:"Order ID:"}),t.jsx("div",{className:"font-mono",children:Q.order_id})]}),(0,t.jsxs)("div",{children:[t.jsx("span",{className:"text-sm text-gray-500",children:"Customer:"}),t.jsx("div",{children:Q.order?.customer_name})]}),(0,t.jsxs)("div",{children:[t.jsx("span",{className:"text-sm text-gray-500",children:"Email:"}),t.jsx("div",{children:Q.order?.customer_email})]}),(0,t.jsxs)("div",{children:[t.jsx("span",{className:"text-sm text-gray-500",children:"Amount:"}),t.jsx("div",{className:"font-bold",children:(0,w.x)(Q.order?.total_amount||0)})]})]})})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[t.jsx(g._,{htmlFor:"tracking_number",children:"Tracking Number"}),t.jsx(m.I,{id:"tracking_number",value:O,onChange:e=>A(e.target.value),placeholder:"Enter tracking number"})]}),(0,t.jsxs)("div",{children:[t.jsx(g._,{htmlFor:"shipping_provider",children:"Shipping Provider"}),(0,t.jsxs)(j.Ph,{value:U,onValueChange:L,children:[t.jsx(j.i4,{children:t.jsx(j.ki,{placeholder:"Select provider"})}),(0,t.jsxs)(j.Bw,{children:[t.jsx(j.Ql,{value:"BlueDart",children:"BlueDart"}),t.jsx(j.Ql,{value:"FedEx",children:"FedEx"}),t.jsx(j.Ql,{value:"DHL",children:"DHL"}),t.jsx(j.Ql,{value:"DTDC",children:"DTDC"}),t.jsx(j.Ql,{value:"IndiaPost",children:"India Post"}),t.jsx(j.Ql,{value:"Delhivery",children:"Delhivery"})]})]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[t.jsx(g._,{htmlFor:"status",children:"Shipping Status"}),(0,t.jsxs)(j.Ph,{value:J,onValueChange:Y,children:[t.jsx(j.i4,{children:t.jsx(j.ki,{})}),(0,t.jsxs)(j.Bw,{children:[t.jsx(j.Ql,{value:"pending",children:"Pending"}),t.jsx(j.Ql,{value:"packed",children:"Packed"}),t.jsx(j.Ql,{value:"shipped",children:"Shipped"}),t.jsx(j.Ql,{value:"in_transit",children:"In Transit"}),t.jsx(j.Ql,{value:"out_for_delivery",children:"Out for Delivery"}),t.jsx(j.Ql,{value:"delivered",children:"Delivered"}),t.jsx(j.Ql,{value:"returned",children:"Returned"}),t.jsx(j.Ql,{value:"cancelled",children:"Cancelled"})]})]})]}),(0,t.jsxs)("div",{children:[t.jsx(g._,{htmlFor:"estimated_delivery",children:"Estimated Delivery"}),t.jsx(m.I,{id:"estimated_delivery",type:"date",value:z,onChange:e=>M(e.target.value)})]})]}),(0,t.jsxs)("div",{children:[t.jsx(g._,{htmlFor:"notes",children:"Shipping Notes"}),t.jsx(b.g,{id:"notes",value:F,onChange:e=>V(e.target.value),placeholder:"Add notes about shipping...",rows:3})]}),(0,t.jsxs)("div",{className:"flex justify-end space-x-4",children:[t.jsx(p.z,{variant:"outline",onClick:()=>q(!1),children:"Cancel"}),t.jsx(p.z,{onClick:K,disabled:B,className:"bg-gradient-to-r from-amber-600 to-orange-600 hover:from-amber-700 hover:to-orange-700",children:B?"Updating...":"Update Shipping"})]})]})]})]})})]})}},76466:(e,s,r)=>{"use strict";r.d(s,{g:()=>a});var t=r(60080),i=r(9885),n=r(23161);let a=i.forwardRef(({className:e,...s},r)=>t.jsx("textarea",{className:(0,n.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...s}));a.displayName="Textarea"},13899:(e,s,r)=>{"use strict";function t(e){return`₹${new Intl.NumberFormat("en-US").format(e)}`}r.d(s,{x:()=>t})},33403:(e,s,r)=>{"use strict";r.r(s),r.d(s,{$$typeof:()=>a,__esModule:()=>n,default:()=>d});var t=r(17536);let i=(0,t.createProxy)(String.raw`C:\Users\ANIKET\Documents\jewllery-main\jewllery-main\app\admin\shipping\page.tsx`),{__esModule:n,$$typeof:a}=i,l=i.default,d=l}};var s=require("../../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),t=s.X(0,[3447,1971,2451,6206,5138,4745,2730,7589,7888,5247,8203,823,2903,558,4423,6261,8384,4796,7052,2065,1839,9378,2970,6777,589,5072,4747],()=>r(49537));module.exports=t})();