(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9091],{2095:function(e,t,s){Promise.resolve().then(s.bind(s,37772))},37772:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return z}});var a=s(57437),n=s(2265),r=s(24033),i=s(25119),o=s(4322),l=s(38438),c=s(93505),d=s(11961),u=s(25750),m=s(29409),f=s(68004),x=s(41827),g=s(3021),h=s(65883),p=s(93023),b=s(51908),v=s(29155),y=s(25324),j=s(48294),N=s(61396),w=s.n(N),k=s(16691),_=s.n(k);let I=[{name:"Dashboard",href:"/admin",icon:i.Z},{name:"Products",href:"/admin/products",icon:o.Z},{name:"Carousel",href:"/admin/carousel",icon:l.Z},{name:"Orders",href:"/admin/orders",icon:c.Z},{name:"Shipping",href:"/admin/shipping",icon:d.Z},{name:"Users",href:"/admin/users",icon:u.Z},{name:"Settings",href:"/admin/settings",icon:m.Z}];function S(e){let{children:t}=e,[s,i]=(0,n.useState)(!1),{admin:o,logout:l,isAuthenticated:c,loading:d}=(0,j.J3)(),u=(0,r.useRouter)(),m=(0,r.usePathname)(),N="/admin/login"===m;if((0,n.useEffect)(()=>{N||d||c||u.replace("/admin/login")},[N,d,c,u]),(0,n.useEffect)(()=>{N&&c&&!d&&u.replace("/admin")},[N,c,d,u]),N)return(0,a.jsx)(a.Fragment,{children:t});if(d)return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-600 mx-auto"}),(0,a.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})});if(!c)return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-600 mx-auto"}),(0,a.jsx)("p",{className:"mt-4 text-gray-600",children:"Redirecting..."})]})});let w=async()=>{await l(),u.push("/admin/login")};return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsx)(y.yo,{open:s,onOpenChange:i,children:(0,a.jsx)(y.ue,{side:"left",className:"w-64 p-0",children:(0,a.jsx)(C,{onNavigate:()=>i(!1)})})}),(0,a.jsx)("div",{className:"hidden lg:fixed lg:inset-y-0 lg:flex lg:w-64 lg:flex-col",children:(0,a.jsx)(C,{})}),(0,a.jsxs)("div",{className:"lg:pl-64",children:[(0,a.jsxs)("div",{className:"sticky top-0 z-40 flex h-16 shrink-0 items-center gap-x-4 border-b border-gray-200 bg-white px-4 shadow-sm sm:gap-x-6 sm:px-6 lg:px-8",children:[(0,a.jsx)(p.z,{variant:"ghost",size:"icon",className:"lg:hidden",onClick:()=>i(!0),children:(0,a.jsx)(f.Z,{className:"h-6 w-6"})}),(0,a.jsxs)("div",{className:"flex flex-1 gap-x-4 lg:gap-x-6",children:[(0,a.jsxs)("div",{className:"relative flex flex-1",children:[(0,a.jsx)(x.Z,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"}),(0,a.jsx)(b.I,{placeholder:"Search...",className:"pl-10 w-full max-w-md"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-x-4",children:[(0,a.jsxs)(p.z,{variant:"ghost",size:"icon",className:"relative",children:[(0,a.jsx)(g.Z,{className:"h-6 w-6"}),(0,a.jsx)(v.C,{className:"absolute -top-1 -right-1 h-5 w-5 rounded-full bg-red-500 text-xs flex items-center justify-center",children:"3"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-x-2",children:[(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900",children:null==o?void 0:o.full_name}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:null==o?void 0:o.role})]}),(0,a.jsx)("div",{className:"h-8 w-8 rounded-full bg-gradient-to-r from-amber-500 to-orange-600 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-white text-sm font-bold",children:null==o?void 0:o.full_name.charAt(0)})})]}),(0,a.jsx)(p.z,{variant:"ghost",size:"icon",onClick:w,children:(0,a.jsx)(h.Z,{className:"h-5 w-5"})})]})]})]}),(0,a.jsx)("main",{className:"py-6",children:(0,a.jsx)("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:t})})]})]})}function C(e){let{onNavigate:t}=e;return(0,a.jsxs)("div",{className:"flex grow flex-col gap-y-5 overflow-y-auto bg-white border-r border-gray-200 px-6 pb-4",children:[(0,a.jsx)("div",{className:"flex h-16 shrink-0 items-center",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"relative w-8 h-8",children:(0,a.jsx)(_(),{src:"/alankarika-logo.png",alt:"Alankarika Logo",fill:!0,className:"object-contain"})}),(0,a.jsx)("span",{className:"text-xl font-bold bg-gradient-to-r from-amber-600 to-orange-600 bg-clip-text text-transparent",children:"Admin Panel"})]})}),(0,a.jsx)("nav",{className:"flex flex-1 flex-col",children:(0,a.jsx)("ul",{role:"list",className:"flex flex-1 flex-col gap-y-7",children:(0,a.jsx)("li",{children:(0,a.jsx)("ul",{role:"list",className:"-mx-2 space-y-1",children:I.map(e=>(0,a.jsx)("li",{children:(0,a.jsxs)(w(),{href:e.href,onClick:t,className:"group flex gap-x-3 rounded-md p-2 text-sm leading-6 font-semibold hover:bg-amber-50 hover:text-amber-600 transition-colors",children:[(0,a.jsx)(e.icon,{className:"h-6 w-6 shrink-0"}),e.name]})},e.name))})})})})]})}function z(e){let{children:t}=e,s=(0,j.YY)();return(0,a.jsx)(j.W,{value:s,children:(0,a.jsx)(S,{children:t})})}},29155:function(e,t,s){"use strict";s.d(t,{C:function(){return o}});var a=s(57437);s(2265);var n=s(96061),r=s(39311);let i=(0,n.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function o(e){let{className:t,variant:s,...n}=e;return(0,a.jsx)("div",{className:(0,r.cn)(i({variant:s}),t),...n})}},93023:function(e,t,s){"use strict";s.d(t,{z:function(){return c}});var a=s(57437),n=s(2265),r=s(67256),i=s(96061),o=s(39311);let l=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=n.forwardRef((e,t)=>{let{className:s,variant:n,size:i,asChild:c=!1,...d}=e,u=c?r.g7:"button";return(0,a.jsx)(u,{className:(0,o.cn)(l({variant:n,size:i,className:s})),ref:t,...d})});c.displayName="Button"},51908:function(e,t,s){"use strict";s.d(t,{I:function(){return i}});var a=s(57437),n=s(2265),r=s(39311);let i=n.forwardRef((e,t)=>{let{className:s,type:n,...i}=e;return(0,a.jsx)("input",{type:n,className:(0,r.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...i})});i.displayName="Input"},25324:function(e,t,s){"use strict";s.d(t,{aM:function(){return d},ue:function(){return x},yo:function(){return c}});var a=s(57437),n=s(2265),r=s(28712),i=s(96061),o=s(82549),l=s(39311);let c=r.fC,d=r.xz;r.x8;let u=r.h_,m=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(r.aV,{className:(0,l.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...n,ref:t})});m.displayName=r.aV.displayName;let f=(0,i.j)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),x=n.forwardRef((e,t)=>{let{side:s="right",className:n,children:i,...c}=e;return(0,a.jsxs)(u,{children:[(0,a.jsx)(m,{}),(0,a.jsxs)(r.VY,{ref:t,className:(0,l.cn)(f({side:s}),n),...c,children:[i,(0,a.jsxs)(r.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,a.jsx)(o.Z,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});x.displayName=r.VY.displayName;let g=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(r.Dx,{ref:t,className:(0,l.cn)("text-lg font-semibold text-foreground",s),...n})});g.displayName=r.Dx.displayName;let h=n.forwardRef((e,t)=>{let{className:s,...n}=e;return(0,a.jsx)(r.dk,{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",s),...n})});h.displayName=r.dk.displayName},48294:function(e,t,s){"use strict";s.d(t,{J3:function(){return o},W:function(){return c},YY:function(){return l}});var a=s(2265),n=s(1492);let r=(0,n.eI)("https://ljvrtryayjlwtankpfrm.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxqdnJ0cnlheWpsd3RhbmtwZnJtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTE5MDU4NDgsImV4cCI6MjA2NzQ4MTg0OH0.ZYrAg7gtynVNnwmeDNgmWVVk0Vgb6thkjDgC_a0jWcM"),i=(0,a.createContext)(null),o=()=>{let e=(0,a.useContext)(i);if(!e)throw Error("useAdminAuth must be used within AdminAuthProvider");return e},l=()=>{let[e,t]=(0,a.useState)(null),[s,n]=(0,a.useState)(!0);(0,a.useEffect)(()=>{(()=>{try{let e=localStorage.getItem("admin_session_token"),s=localStorage.getItem("admin_data");if(e&&s)try{let a=JSON.parse(s);t(a);let n="https:"===window.location.protocol;document.cookie="admin_session_token=".concat(e,"; path=/; max-age=").concat(604800,"; ").concat(n?"secure; ":"","samesite=strict")}catch(e){console.error("Failed to parse admin data:",e),localStorage.removeItem("admin_session_token"),localStorage.removeItem("admin_data")}}catch(e){console.error("Session check failed:",e)}finally{n(!1)}})()},[]);let i=async(e,s)=>{try{n(!0);try{let a=await fetch("/api/admin/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:s})}),n=await a.json();if(!n.success)return{success:!1,error:n.error};{localStorage.setItem("admin_session_token",n.session_token),localStorage.setItem("admin_data",JSON.stringify(n.admin));let e="https:"===window.location.protocol;return document.cookie="admin_session_token=".concat(n.session_token,"; path=/; max-age=").concat(604800,"; ").concat(e?"secure; ":"","samesite=strict"),t(n.admin),{success:!0}}}catch(e){return{success:!1,error:"Login failed"}}}catch(e){return console.error("Login failed:",e),{success:!1,error:"Login failed"}}finally{n(!1)}},o=async()=>{try{let e=localStorage.getItem("admin_session_token");e&&await r.from("admin_sessions").delete().eq("session_token",e),localStorage.removeItem("admin_session_token"),localStorage.removeItem("admin_data"),document.cookie="admin_session_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",t(null)}catch(e){console.error("Logout failed:",e)}};return{admin:e,loading:s,login:i,logout:o,isAuthenticated:!!e}},c=i.Provider},39311:function(e,t,s){"use strict";s.d(t,{cn:function(){return r}});var a=s(57042),n=s(74769);function r(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,n.m6)((0,a.W)(t))}}},function(e){e.O(0,[7533,7245,6691,4962,1080,7856,5153,2971,7864,1744],function(){return e(e.s=2095)}),_N_E=e.O()}]);