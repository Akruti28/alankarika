(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5920],{99670:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});var a=r(65531);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,a.Z)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},67972:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});var a=r(65531);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,a.Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},23315:function(e,t,r){Promise.resolve().then(r.bind(r,45534))},45534:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return w}});var a=r(57437),n=r(2265),s=r(79303),i=r(67972),o=r(65531);/**
 * @license lucide-react v0.446.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,o.Z)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),c=(0,o.Z)("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);var d=r(99670),u=r(93023),m=r(86110),f=r(51908),g=r(66672),x=r(42206),p=r(24033),h=r(48294),b=r(16691),v=r.n(b);function y(){let[e,t]=(0,n.useState)(""),[r,o]=(0,n.useState)(""),[b,y]=(0,n.useState)(!1),[j,w]=(0,n.useState)(""),[N,k]=(0,n.useState)(!1),{login:_,isAuthenticated:I,loading:S}=(0,h.J3)(),C=(0,p.useRouter)();(0,n.useEffect)(()=>{console.log("\uD83D\uDDE8️ Login page auth state changed:",{isAuthenticated:I,loading:S}),I&&!S&&(console.log("✅ User is authenticated, redirecting to admin dashboard"),C.replace("/admin"))},[I,S,C]);let E=async t=>{t.preventDefault(),console.log("\uD83D\uDDE8️ Form submitted with:",{username:e,password:r}),w(""),k(!0);try{let t=await _(e,r);if(t.success){window.location.replace("/admin");return}w(t.error||"Login failed")}catch(e){w("An unexpected error occurred")}finally{k(!1)}};return S?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-orange-50 via-amber-50 to-yellow-50 px-4",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-amber-600 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:I?"Redirecting to admin panel...":"Checking authentication..."})]})}):(0,a.jsxs)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-orange-50 via-amber-50 to-yellow-50 px-4",children:[(0,a.jsxs)("div",{className:"absolute inset-0 overflow-hidden",children:[(0,a.jsx)(s.E.div,{className:"absolute top-20 left-10 w-32 h-32 bg-gradient-to-r from-amber-400 to-orange-500 rounded-full blur-xl opacity-20",animate:{scale:[1,1.2,1],rotate:[0,180,360]},transition:{duration:8,repeat:1/0,ease:"easeInOut"}}),(0,a.jsx)(s.E.div,{className:"absolute bottom-20 right-10 w-40 h-40 bg-gradient-to-r from-rose-400 to-pink-500 rounded-full blur-xl opacity-20",animate:{scale:[1.2,1,1.2],rotate:[360,180,0]},transition:{duration:10,repeat:1/0,ease:"easeInOut",delay:2}})]}),(0,a.jsx)(s.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"w-full max-w-md relative z-10",children:(0,a.jsxs)(m.Zb,{className:"shadow-xl border-0 bg-white/95 backdrop-blur-sm",children:[(0,a.jsxs)(m.Ol,{className:"space-y-1 text-center",children:[(0,a.jsx)("div",{className:"flex items-center justify-center gap-2 mb-4",children:(0,a.jsx)("div",{className:"relative w-16 h-16",children:(0,a.jsx)(v(),{src:"/alankarika-logo.png",alt:"Alankarika Logo",fill:!0,className:"object-contain"})})}),(0,a.jsx)(m.ll,{className:"text-2xl font-bold bg-gradient-to-r from-amber-600 to-orange-600 bg-clip-text text-transparent",children:"अलंकारिका Admin"}),(0,a.jsx)(m.SZ,{children:"Sign in to access the admin dashboard"})]}),(0,a.jsxs)(m.aY,{children:[(0,a.jsxs)("form",{onSubmit:E,className:"space-y-4",children:[j&&(0,a.jsx)(x.bZ,{className:"border-red-200 bg-red-50",children:(0,a.jsx)(x.X,{className:"text-red-700",children:j})}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(g._,{htmlFor:"username",children:"Username"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(i.Z,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"}),(0,a.jsx)(f.I,{id:"username",type:"text",autoComplete:"username",placeholder:"Enter your username",value:e,onChange:e=>t(e.target.value),className:"pl-10",required:!0,disabled:N})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(g._,{htmlFor:"password",children:"Password"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(l,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-gray-400"}),(0,a.jsx)(f.I,{id:"password",type:b?"text":"password",autoComplete:"current-password",placeholder:"Enter your password",value:r,onChange:e=>o(e.target.value),className:"pl-10 pr-10",required:!0,disabled:N}),(0,a.jsx)(u.z,{type:"button",variant:"ghost",size:"icon",className:"absolute right-0 top-0 h-full px-3 hover:bg-transparent",onClick:()=>y(!b),disabled:N,children:b?(0,a.jsx)(c,{className:"h-4 w-4 text-gray-400"}):(0,a.jsx)(d.Z,{className:"h-4 w-4 text-gray-400"})})]})]}),(0,a.jsx)(u.z,{type:"submit",className:"w-full bg-gradient-to-r from-amber-600 to-orange-600 hover:from-amber-700 hover:to-orange-700",disabled:N,children:N?(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Signing in..."]}):"Sign In"})]}),(0,a.jsx)("div",{className:"mt-6 text-center",children:(0,a.jsxs)("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:[(0,a.jsx)("p",{className:"text-sm text-amber-800 font-medium",children:"Default Admin Credentials:"}),(0,a.jsxs)("p",{className:"text-xs text-amber-700 mt-1",children:["Username: ",(0,a.jsx)("span",{className:"font-mono bg-amber-100 px-1 rounded",children:"alankarika_admin"})]}),(0,a.jsxs)("p",{className:"text-xs text-amber-700",children:["Password: ",(0,a.jsx)("span",{className:"font-mono bg-amber-100 px-1 rounded",children:"alankarika@2025"})]})]})})]})]})})]})}function j(e){let{children:t}=e,[r,s]=(0,n.useState)(!1);return((0,n.useEffect)(()=>{let e=e=>{console.error("Login page error:",e),s(!0)};return window.addEventListener("error",e),()=>window.removeEventListener("error",e)},[]),r)?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-orange-50 via-amber-50 to-yellow-50 px-4",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Admin Login"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:"There was an issue loading the authentication system."}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Please try refreshing the page or contact support."}),(0,a.jsx)("button",{onClick:()=>window.location.reload(),className:"mt-4 px-4 py-2 bg-amber-600 text-white rounded hover:bg-amber-700",children:"Refresh Page"})]})}):(0,a.jsx)(a.Fragment,{children:t})}function w(){let e=(0,h.YY)();return(0,a.jsx)(j,{children:(0,a.jsx)(h.W,{value:e,children:(0,a.jsx)(y,{})})})}},42206:function(e,t,r){"use strict";r.d(t,{X:function(){return d},bZ:function(){return l}});var a=r(57437),n=r(2265),s=r(96061),i=r(39311);let o=(0,s.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),l=n.forwardRef((e,t)=>{let{className:r,variant:n,...s}=e;return(0,a.jsx)("div",{ref:t,role:"alert",className:(0,i.cn)(o({variant:n}),r),...s})});l.displayName="Alert";let c=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("h5",{ref:t,className:(0,i.cn)("mb-1 font-medium leading-none tracking-tight",r),...n})});c.displayName="AlertTitle";let d=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,i.cn)("text-sm [&_p]:leading-relaxed",r),...n})});d.displayName="AlertDescription"},93023:function(e,t,r){"use strict";r.d(t,{z:function(){return c}});var a=r(57437),n=r(2265),s=r(67256),i=r(96061),o=r(39311);let l=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=n.forwardRef((e,t)=>{let{className:r,variant:n,size:i,asChild:c=!1,...d}=e,u=c?s.g7:"button";return(0,a.jsx)(u,{className:(0,o.cn)(l({variant:n,size:i,className:r})),ref:t,...d})});c.displayName="Button"},86110:function(e,t,r){"use strict";r.d(t,{Ol:function(){return o},SZ:function(){return c},Zb:function(){return i},aY:function(){return d},ll:function(){return l}});var a=r(57437),n=r(2265),s=r(39311);let i=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...n})});i.displayName="Card";let o=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("flex flex-col space-y-1.5 p-6",r),...n})});o.displayName="CardHeader";let l=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("h3",{ref:t,className:(0,s.cn)("text-2xl font-semibold leading-none tracking-tight",r),...n})});l.displayName="CardTitle";let c=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("p",{ref:t,className:(0,s.cn)("text-sm text-muted-foreground",r),...n})});c.displayName="CardDescription";let d=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("p-6 pt-0",r),...n})});d.displayName="CardContent";let u=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)("div",{ref:t,className:(0,s.cn)("flex items-center p-6 pt-0",r),...n})});u.displayName="CardFooter"},51908:function(e,t,r){"use strict";r.d(t,{I:function(){return i}});var a=r(57437),n=r(2265),s=r(39311);let i=n.forwardRef((e,t)=>{let{className:r,type:n,...i}=e;return(0,a.jsx)("input",{type:n,className:(0,s.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...i})});i.displayName="Input"},66672:function(e,t,r){"use strict";r.d(t,{_:function(){return c}});var a=r(57437),n=r(2265),s=r(36743),i=r(96061),o=r(39311);let l=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,a.jsx)(s.f,{ref:t,className:(0,o.cn)(l(),r),...n})});c.displayName=s.f.displayName},48294:function(e,t,r){"use strict";r.d(t,{J3:function(){return o},W:function(){return c},YY:function(){return l}});var a=r(2265),n=r(1492);let s=(0,n.eI)("https://ljvrtryayjlwtankpfrm.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxqdnJ0cnlheWpsd3RhbmtwZnJtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTE5MDU4NDgsImV4cCI6MjA2NzQ4MTg0OH0.ZYrAg7gtynVNnwmeDNgmWVVk0Vgb6thkjDgC_a0jWcM"),i=(0,a.createContext)(null),o=()=>{let e=(0,a.useContext)(i);if(!e)throw Error("useAdminAuth must be used within AdminAuthProvider");return e},l=()=>{let[e,t]=(0,a.useState)(null),[r,n]=(0,a.useState)(!0);(0,a.useEffect)(()=>{(()=>{try{let e=localStorage.getItem("admin_session_token"),r=localStorage.getItem("admin_data");if(e&&r)try{let a=JSON.parse(r);t(a);let n="https:"===window.location.protocol;document.cookie="admin_session_token=".concat(e,"; path=/; max-age=").concat(604800,"; ").concat(n?"secure; ":"","samesite=strict")}catch(e){console.error("Failed to parse admin data:",e),localStorage.removeItem("admin_session_token"),localStorage.removeItem("admin_data")}}catch(e){console.error("Session check failed:",e)}finally{n(!1)}})()},[]);let i=async(e,r)=>{try{n(!0);try{let a=await fetch("/api/admin/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:r})}),n=await a.json();if(!n.success)return{success:!1,error:n.error};{localStorage.setItem("admin_session_token",n.session_token),localStorage.setItem("admin_data",JSON.stringify(n.admin));let e="https:"===window.location.protocol;return document.cookie="admin_session_token=".concat(n.session_token,"; path=/; max-age=").concat(604800,"; ").concat(e?"secure; ":"","samesite=strict"),t(n.admin),{success:!0}}}catch(e){return{success:!1,error:"Login failed"}}}catch(e){return console.error("Login failed:",e),{success:!1,error:"Login failed"}}finally{n(!1)}},o=async()=>{try{let e=localStorage.getItem("admin_session_token");e&&await s.from("admin_sessions").delete().eq("session_token",e),localStorage.removeItem("admin_session_token"),localStorage.removeItem("admin_data"),document.cookie="admin_session_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT",t(null)}catch(e){console.error("Logout failed:",e)}};return{admin:e,loading:r,login:i,logout:o,isAuthenticated:!!e}},c=i.Provider},39311:function(e,t,r){"use strict";r.d(t,{cn:function(){return s}});var a=r(57042),n=r(74769);function s(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.m6)((0,a.W)(t))}},36743:function(e,t,r){"use strict";r.d(t,{f:function(){return o}});var a=r(2265),n=r(9381),s=r(57437),i=a.forwardRef((e,t)=>(0,s.jsx)(n.WV.label,{...e,ref:t,onMouseDown:t=>{let r=t.target;r.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));i.displayName="Label";var o=i},9381:function(e,t,r){"use strict";r.d(t,{WV:function(){return o},jH:function(){return l}});var a=r(2265),n=r(54887),s=r(67256),i=r(57437),o=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let r=(0,s.Z8)(`Primitive.${t}`),n=a.forwardRef((e,a)=>{let{asChild:n,...s}=e,o=n?r:t;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,i.jsx)(o,{...s,ref:a})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function l(e,t){e&&n.flushSync(()=>e.dispatchEvent(t))}}},function(e){e.O(0,[7533,7245,6691,1653,2971,7864,1744],function(){return e(e.s=23315)}),_N_E=e.O()}]);