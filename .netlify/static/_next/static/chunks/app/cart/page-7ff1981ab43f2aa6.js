(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1565],{58725:function(e,a,t){Promise.resolve().then(t.bind(t,14133))},14133:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return U}});var s=t(57437),r=t(2265),n=t(16691),i=t.n(n),l=t(79303),o=t(86712),c=t(64891),d=t(9883),m=t(17810),u=t(45367),p=t(93505),h=t(93023),x=t(86110),f=t(29155),g=t(16775),y=t(61396),j=t.n(y),N=t(73067),b=t(71738),v=t(94286),_=t(21271),w=t(11961),S=t(49036),I=t(51908),C=t(66672),O=t(35490),k=t(76369),z=t(39311);let D=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(O.fC,{className:(0,z.cn)("grid gap-2",t),...r,ref:a})});D.displayName=O.fC.displayName;let T=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(O.ck,{ref:a,className:(0,z.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...r,children:(0,s.jsx)(O.z$,{className:"flex items-center justify-center",children:(0,s.jsx)(k.Z,{className:"h-2.5 w-2.5 fill-current text-current"})})})});T.displayName=O.ck.displayName;var P=t(55771);let Z=()=>new Promise(e=>{let a=document.createElement("script");a.src="https://checkout.razorpay.com/v1/checkout.js",a.onload=()=>{e(!0)},a.onerror=()=>{e(!1)},document.body.appendChild(a)}),A=async function(e,a,t){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"INR";try{let r=await fetch("/api/razorpay/create-order",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:100*e,currency:s,customerInfo:{name:a.name,email:a.email,phone:a.contact,address:"".concat(a.address,", ").concat(a.city,", ").concat(a.state," - ").concat(a.pincode)},cartItems:t})}),n=await r.json();return n}catch(e){throw e}},E=async(e,a)=>{let t=await Z();if(!t){alert("Razorpay SDK failed to load. Are you online?");return}let s={key:"rzp_test_35L3OU9qMdABza",amount:e.amount,currency:e.currency,name:"अलंकारिका",description:"Traditional Jewelry Purchase",image:"/alankarika-logo.png",order_id:e.id,handler:function(a){R({...a,orderId:e.orderId})},prefill:{name:a.name,email:a.email,contact:a.contact},theme:{color:"#D97706"},modal:{ondismiss:function(){}}},r=new window.Razorpay(s);r.open()},R=async e=>{try{let a={razorpay_order_id:e.razorpay_order_id,razorpay_payment_id:e.razorpay_payment_id,razorpay_signature:e.razorpay_signature,orderId:e.orderId},t=await fetch("/api/razorpay/verify-payment",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!t.ok){await t.text(),alert("Payment verification failed: HTTP ".concat(t.status));return}let s=await t.json();if(s.success){let a=localStorage.getItem("currentOrderData");if(a){let t=JSON.parse(a);t.payment_status="paid",t.status="confirmed",t.razorpay_payment_id=e.razorpay_payment_id,sessionStorage.setItem("paymentSuccessOrderData",JSON.stringify(t)),localStorage.setItem("lastOrderData",JSON.stringify(t)),localStorage.removeItem("currentOrderData"),localStorage.removeItem("alankaarika-cart"),window.location.href="/payment-success?orderId=".concat(e.orderId)}else window.location.href="/payment-success?orderId=".concat(e.orderId)}else alert("Payment verification failed: ".concat(s.error||"Unknown error"))}catch(e){alert("Payment verification error")}};var q=t(1492),F=t(70763);function J(e){let{cartItems:a,total:t,onBack:n,onSuccess:o}=e,[c,d]=(0,r.useState)("online"),[m,u]=(0,r.useState)(!1),[p,y]=(0,r.useState)({name:"",email:"",phone:"",address:"",city:"",state:"",pincode:"",specialInstructions:""}),j=(0,q.eI)("https://ljvrtryayjlwtankpfrm.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxqdnJ0cnlheWpsd3RhbmtwZnJtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTE5MDU4NDgsImV4cCI6MjA2NzQ4MTg0OH0.ZYrAg7gtynVNnwmeDNgmWVVk0Vgb6thkjDgC_a0jWcM"),{user:O}=(0,F.useUser)(),k=e=>{y({...p,[e.target.name]:e.target.value})},z=async e=>{e.preventDefault(),u(!0);try{"cod"===c?await Z():await R()}catch(e){alert("Payment failed. Please try again.")}finally{u(!1)}},Z=async()=>{let e={id:"COD_"+Date.now(),customer_name:p.name,customer_email:p.email,customer_phone:p.phone,customer_address:"".concat(p.address,", ").concat(p.city,", ").concat(p.state," - ").concat(p.pincode),items:a,total_amount:t,payment_method:"cod",payment_status:"pending",razorpay_payment_id:"COD_"+Date.now(),created_at:new Date().toISOString(),updated_at:new Date().toISOString(),status:"confirmed",simple_user_id:(null==O?void 0:O.id)||null},{error:s}=await j.from("orders").insert([{customer_name:e.customer_name,customer_email:e.customer_email,customer_phone:e.customer_phone,customer_address:e.customer_address,items:e.items,total_amount:e.total_amount,payment_method:e.payment_method,payment_status:e.payment_status,status:e.status,created_at:e.created_at,updated_at:e.updated_at,simple_user_id:(null==O?void 0:O.id)||null}]);if(s){alert("Order error: "+s.message);return}try{await fetch("/api/email/order-confirmation",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({orderId:e.id,customerName:e.customer_name,customerEmail:e.customer_email,customerPhone:e.customer_phone,shippingAddress:e.customer_address,items:e.items,totalAmount:e.total_amount,paymentMethod:e.payment_method,orderDate:e.created_at})})}catch(e){alert("Order placed, but failed to send confirmation email.")}sessionStorage.setItem("paymentSuccessOrderData",JSON.stringify(e)),localStorage.setItem("lastOrderData",JSON.stringify(e)),localStorage.removeItem("alankaarika-cart"),setTimeout(()=>{window.location.href="/payment-success?orderId=".concat(e.id)},1e3)},R=async()=>{try{let e=await A(t,p,a),s={id:e.orderId,customer_name:p.name,customer_email:p.email,customer_phone:p.phone,customer_address:"".concat(p.address,", ").concat(p.city,", ").concat(p.state," - ").concat(p.pincode),items:a,total_amount:t,payment_method:"online",payment_status:"pending",razorpay_order_id:e.id,created_at:new Date().toISOString(),updated_at:new Date().toISOString(),status:"pending",simple_user_id:(null==O?void 0:O.id)||null};localStorage.setItem("currentOrderData",JSON.stringify(s));let{error:r}=await j.from("orders").insert([{customer_name:s.customer_name,customer_email:s.customer_email,customer_phone:s.customer_phone,customer_address:s.customer_address,items:s.items,total_amount:s.total_amount,payment_method:s.payment_method,payment_status:s.payment_status,status:s.status,created_at:s.created_at,updated_at:s.updated_at,razorpay_order_id:s.razorpay_order_id,simple_user_id:(null==O?void 0:O.id)||null}]);if(r){alert("Order error: "+r.message);return}try{await fetch("/api/email/order-confirmation",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({orderId:s.id,customerName:s.customer_name,customerEmail:s.customer_email,customerPhone:s.customer_phone,shippingAddress:s.customer_address,items:s.items,totalAmount:s.total_amount,paymentMethod:s.payment_method,orderDate:s.created_at})})}catch(e){alert("Order placed, but failed to send confirmation email.")}await E(e,{name:p.name,email:p.email,contact:p.phone})}catch(e){throw alert("Online payment error: "+e),e}};return(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,s.jsx)("div",{className:"container mx-auto px-4",children:(0,s.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4 mb-8",children:[(0,s.jsx)(h.z,{variant:"outline",size:"icon",onClick:n,children:(0,s.jsx)(N.Z,{className:"w-4 h-4"})}),(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Checkout"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,s.jsx)(l.E.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5},className:"w-full",children:(0,s.jsxs)(x.Zb,{children:[(0,s.jsx)(x.Ol,{children:(0,s.jsx)(x.ll,{children:"Shipping Information"})}),(0,s.jsx)(x.aY,{children:(0,s.jsxs)("form",{onSubmit:z,className:"space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(C._,{htmlFor:"name",children:"Full Name *"}),(0,s.jsx)(I.I,{id:"name",name:"name",value:p.name,onChange:k,required:!0,className:"w-full"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(C._,{htmlFor:"email",children:"Email *"}),(0,s.jsx)(I.I,{id:"email",name:"email",type:"email",value:p.email,onChange:k,required:!0,className:"w-full"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(C._,{htmlFor:"phone",children:"Phone Number *"}),(0,s.jsx)(I.I,{id:"phone",name:"phone",value:p.phone,onChange:k,required:!0,className:"w-full"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(C._,{htmlFor:"address",children:"Address *"}),(0,s.jsx)(P.g,{id:"address",name:"address",value:p.address,onChange:k,required:!0,className:"w-full"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(C._,{htmlFor:"city",children:"City *"}),(0,s.jsx)(I.I,{id:"city",name:"city",value:p.city,onChange:k,required:!0,className:"w-full"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(C._,{htmlFor:"state",children:"State *"}),(0,s.jsx)(I.I,{id:"state",name:"state",value:p.state,onChange:k,required:!0,className:"w-full"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(C._,{htmlFor:"pincode",children:"Pincode *"}),(0,s.jsx)(I.I,{id:"pincode",name:"pincode",value:p.pincode,onChange:k,required:!0,className:"w-full"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(C._,{htmlFor:"specialInstructions",children:"Special Instructions (Optional)"}),(0,s.jsx)(P.g,{id:"specialInstructions",name:"specialInstructions",value:p.specialInstructions,onChange:k,placeholder:"Any special delivery instructions...",className:"w-full"})]}),(0,s.jsx)(g.Z,{}),(0,s.jsxs)("div",{children:[(0,s.jsx)(C._,{className:"text-lg font-semibold mb-4 block",children:"Payment Method"}),(0,s.jsxs)(D,{value:c,onValueChange:d,children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2 p-4 border rounded-lg",children:[(0,s.jsx)(T,{value:"online",id:"online"}),(0,s.jsxs)(C._,{htmlFor:"online",className:"flex items-center gap-2 cursor-pointer",children:[(0,s.jsx)(b.Z,{className:"w-5 h-5"}),"Online Payment"]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2 p-4 border rounded-lg",children:[(0,s.jsx)(T,{value:"cod",id:"cod"}),(0,s.jsxs)(C._,{htmlFor:"cod",className:"flex items-center gap-2 cursor-pointer",children:[(0,s.jsx)(v.Z,{className:"w-5 h-5"}),"Cash on Delivery"]})]})]}),"online"===c&&(0,s.jsxs)("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)(_.Z,{className:"w-5 h-5 text-blue-600"}),(0,s.jsx)("span",{className:"font-medium",children:"Accepted Payment Methods:"})]}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,s.jsx)(f.C,{variant:"secondary",children:"UPI"}),(0,s.jsx)(f.C,{variant:"secondary",children:"Credit Cards"}),(0,s.jsx)(f.C,{variant:"secondary",children:"Debit Cards"}),(0,s.jsx)(f.C,{variant:"secondary",children:"Net Banking"}),(0,s.jsx)(f.C,{variant:"secondary",children:"Wallets"})]})]}),"cod"===c&&(0,s.jsxs)("div",{className:"mt-4 p-4 bg-orange-50 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)(w.Z,{className:"w-5 h-5 text-orange-600"}),(0,s.jsx)("span",{className:"font-medium",children:"Cash on Delivery"})]}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Pay when your order is delivered. Additional charges may apply."})]})]}),(0,s.jsx)(h.z,{type:"submit",className:"w-full bg-gradient-to-r from-amber-600 to-orange-600 hover:from-amber-700 hover:to-orange-700",disabled:m,children:m?"Processing...":"cod"===c?"Place Order":"Proceed to Payment"})]})})]})}),(0,s.jsx)(l.E.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.5},className:"w-full",children:(0,s.jsxs)(x.Zb,{children:[(0,s.jsx)(x.Ol,{children:(0,s.jsx)(x.ll,{children:"Order Summary"})}),(0,s.jsxs)(x.aY,{className:"space-y-4",children:[a.map(e=>{let a=e.image_url&&""!==e.image_url.trim()?e.image_url:e.image||"/alankarika-logo.png";return a=a.replace(/([^:]\/)+/g,"$1"),(0,s.jsxs)("div",{className:"flex items-center gap-3 sm:gap-4 min-w-0",children:[(0,s.jsx)(i(),{src:a,alt:e.name,width:64,height:64,className:"w-16 h-16 sm:w-20 sm:h-20 object-cover rounded",onError:e=>{e.target.src="/alankarika-logo.png"}}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h4",{className:"font-semibold",children:e.name}),(0,s.jsxs)("p",{className:"text-sm text-gray-600",children:["Quantity: ",e.quantity]})]}),(0,s.jsx)("div",{className:"text-right",children:(0,s.jsxs)("p",{className:"font-semibold",children:["₹",(e.price*e.quantity).toLocaleString()]})})]},e.id)}),(0,s.jsx)(g.Z,{}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:"Subtotal:"}),(0,s.jsxs)("span",{children:["₹",t.toLocaleString()]})]}),(0,s.jsx)(g.Z,{}),(0,s.jsxs)("div",{className:"flex justify-between text-lg font-bold",children:[(0,s.jsx)("span",{children:"Total:"}),(0,s.jsxs)("span",{children:["₹",t.toLocaleString()]})]})]}),(0,s.jsxs)("div",{className:"mt-6 p-4 bg-green-50 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)(S.Z,{className:"w-5 h-5 text-green-600"}),(0,s.jsx)("span",{className:"font-medium text-green-800",children:"Secure Checkout"})]}),(0,s.jsx)("p",{className:"text-sm text-green-700",children:"Your payment information is encrypted and secure."})]})]})]})})]})]})})})}var M=t(98554),L=t(24272),V=t(85563),Y=t(54363);function U(){let[e,a]=(0,r.useState)([]),[t,n]=(0,r.useState)(!1),[y,N]=(0,r.useState)(""),[b,v]=(0,r.useState)(null),{cartItems:_,updateQuantity:w,removeFromCart:S}=(0,M.useCart)(),{user:I,loading:C}=(0,F.useUser)(),[O,k]=(0,r.useState)(!1);(0,r.useEffect)(()=>{I||C?k(!1):k(!0)},[I,C]),(0,r.useEffect)(()=>{a(_)},[_]);let z=(e,a)=>{if(a<=0){D(e);return}w(Number(e),Number(a))},D=e=>{S(Number(e))},T=e.reduce((e,a)=>e+(a.price||0)*(a.quantity||0),0),P=e.reduce((e,a)=>e+((a.originalPrice||0)-(a.price||0))*(a.quantity||0),0),Z=0;b&&(Z="percentage"===b.type?T*b.discount/100:b.discount);let A=T-Z;return C?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:"Loading..."}):(0,s.jsxs)(s.Fragment,{children:[!I&&O&&(0,s.jsx)(V.Z,{open:O,onClose:()=>k(!1),onSuccess:()=>k(!1)}),t&&I&&(0,s.jsx)(J,{cartItems:e,total:A,onBack:()=>n(!1),onSuccess:()=>{a([]),localStorage.removeItem("alankaarika-cart"),window.location.href="/payment-success"}}),!t&&I&&(0,s.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-orange-50 to-amber-50",children:[(0,s.jsx)(Y.Z,{}),0===e.length?(0,s.jsxs)(l.E.div,{className:"text-center py-16",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6},children:[(0,s.jsx)(o.Z,{className:"w-24 h-24 text-gray-300 mx-auto mb-6"}),(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Your cart is empty"}),(0,s.jsx)("p",{className:"text-gray-600 mb-8",children:"Discover our beautiful jewelry collections and add items to your cart."}),(0,s.jsx)(h.z,{asChild:!0,size:"lg",className:"bg-gradient-to-r from-amber-600 to-orange-600",children:(0,s.jsx)(j(),{href:"/shop",children:"Continue Shopping"})})]}):(0,s.jsx)("div",{className:"container mx-auto px-2 sm:px-4 py-8",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,s.jsx)("div",{className:"lg:col-span-2 space-y-4",children:e.map((e,a)=>{let t=e.image_url&&""!==e.image_url.trim()?e.image_url:e.image||"/alankarika-logo.png";return t=t.replace(/([^:]\/)\/+/,"$1"),(0,s.jsx)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1*a},children:(0,s.jsx)(x.Zb,{children:(0,s.jsx)(x.aY,{className:"p-6",children:(0,s.jsxs)("div",{className:"flex items-center gap-4 sm:gap-6 min-w-0",children:[(0,s.jsx)(i(),{src:t,alt:e.name,width:96,height:96,className:"w-20 h-20 sm:w-24 sm:h-24 object-cover rounded-lg",onError:e=>{e.target.src="/alankarika-logo.png"}}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h3",{className:"font-semibold text-lg text-gray-900 mb-1",children:e.name}),(0,s.jsx)("p",{className:"text-gray-600 text-sm mb-2",children:e.description}),(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,s.jsx)(f.C,{variant:"outline",children:e.category}),(0,s.jsx)(f.C,{variant:"outline",children:e.material})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-xl font-bold text-green-600",children:(0,L.x)(e.price)}),(0,s.jsx)("span",{className:"text-sm text-gray-400 line-through",children:(0,L.x)(e.originalPrice||0)}),(0,s.jsxs)(f.C,{className:"bg-green-100 text-green-800",children:[e.originalPrice&&e.price?Math.round((e.originalPrice-e.price)/e.originalPrice*100):0,"% OFF"]})]})]}),(0,s.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(h.z,{variant:"outline",size:"icon",onClick:()=>z(e.id,(e.quantity||1)-1),children:(0,s.jsx)(c.Z,{className:"w-4 h-4"})}),(0,s.jsx)("span",{className:"w-12 text-center font-semibold",children:e.quantity}),(0,s.jsx)(h.z,{variant:"outline",size:"icon",onClick:()=>z(e.id,(e.quantity||1)+1),children:(0,s.jsx)(d.Z,{className:"w-4 h-4"})})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(h.z,{variant:"outline",size:"icon",children:(0,s.jsx)(m.Z,{className:"w-4 h-4"})}),(0,s.jsx)(h.z,{variant:"outline",size:"icon",onClick:()=>D(e.id),children:(0,s.jsx)(u.Z,{className:"w-4 h-4"})})]})]})]})})})},e.id)})}),(0,s.jsxs)(l.E.div,{className:"space-y-6 w-full",initial:{opacity:0,x:30},animate:{opacity:1,x:0},transition:{duration:.6},children:[(0,s.jsxs)(x.Zb,{children:[(0,s.jsx)(x.Ol,{children:(0,s.jsx)(x.ll,{children:"Order Summary"})}),(0,s.jsxs)(x.aY,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsxs)("span",{children:["Subtotal (",e.length," items):"]}),(0,s.jsx)("span",{children:(0,L.x)(T)})]}),(0,s.jsxs)("div",{className:"flex justify-between text-green-600",children:[(0,s.jsx)("span",{children:"You Save:"}),(0,s.jsxs)("span",{children:["-",(0,L.x)(P)]})]}),b&&(0,s.jsxs)("div",{className:"flex justify-between text-green-600",children:[(0,s.jsxs)("span",{children:["Coupon (",b.code,"):"]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("span",{children:["-",(0,L.x)(Z)]}),(0,s.jsx)(h.z,{variant:"ghost",size:"sm",onClick:()=>{v(null)},children:(0,s.jsx)(u.Z,{className:"w-3 h-3"})})]})]}),(0,s.jsx)(g.Z,{}),(0,s.jsxs)("div",{className:"flex justify-between text-lg font-bold",children:[(0,s.jsx)("span",{children:"Total:"}),(0,s.jsx)("span",{children:(0,L.x)(A)})]})]})]}),(0,s.jsxs)(h.z,{size:"lg",className:"w-full bg-gradient-to-r from-amber-600 to-orange-600 hover:from-amber-700 hover:to-orange-700",onClick:()=>n(!0),children:[(0,s.jsx)(p.Z,{className:"w-5 h-5 mr-2"}),"Proceed to Checkout"]}),(0,s.jsx)(h.z,{variant:"outline",size:"lg",className:"w-full",asChild:!0,children:(0,s.jsx)(j(),{href:"/shop",children:"Continue Shopping"})})]})]})})]})]})}},85563:function(e,a,t){"use strict";t.d(a,{Z:function(){return d}});var s=t(57437),r=t(2265),n=t(12609),i=t(93023),l=t(51908),o=t(70763),c=t(62621);function d(e){let{open:a,onClose:t,onSuccess:d}=e,{login:m,register:u,loading:p}=(0,o.useUser)(),[h,x]=(0,r.useState)("login"),[f,g]=(0,r.useState)({name:"",email:"",mobile:""}),[y,j]=(0,r.useState)(""),N=e=>{g({...f,[e.target.name]:e.target.value})},b=async e=>{e.preventDefault(),j("");let a=await m(f.mobile);a.success?((0,c.Am)({title:"Login successful!"}),d(),t()):(j(a.error||"Login failed"),(0,c.Am)({title:"Login failed",description:a.error||"Login failed",variant:"destructive"}))},v=async e=>{e.preventDefault(),j("");let a=await u(f.name,f.email,f.mobile);a.success?((0,c.Am)({title:"Registration successful!"}),d(),t()):(j(a.error||"Registration failed"),(0,c.Am)({title:"Registration failed",description:a.error||"Registration failed",variant:"destructive"}))};return(0,s.jsx)(n.Vq,{open:a,onOpenChange:e=>!e&&t(),children:(0,s.jsxs)(n.cZ,{children:[(0,s.jsxs)(n.fK,{children:[(0,s.jsxs)(n.$N,{children:["login"===h?"Login":"Register"," to Continue"]}),(0,s.jsx)(n.Be,{children:"login"===h?"Login with your mobile number to access your account.":"Register a new account with your name, email, and mobile number."})]}),(0,s.jsxs)("div",{className:"flex gap-4 mb-4",children:[(0,s.jsx)(i.z,{variant:"login"===h?"default":"outline",onClick:()=>x("login"),className:"flex-1",children:"Login"}),(0,s.jsx)(i.z,{variant:"register"===h?"default":"outline",onClick:()=>x("register"),className:"flex-1",children:"Register"})]}),"login"===h?(0,s.jsxs)("form",{onSubmit:b,className:"space-y-4",children:[(0,s.jsx)(l.I,{name:"mobile",placeholder:"Mobile Number",value:f.mobile,onChange:N,required:!0,disabled:p}),y&&(0,s.jsx)("div",{className:"text-red-600 text-sm",children:y}),(0,s.jsx)(i.z,{type:"submit",className:"w-full",disabled:p,children:p?"Logging in...":"Login"})]}):(0,s.jsxs)("form",{onSubmit:v,className:"space-y-4",children:[(0,s.jsx)(l.I,{name:"name",placeholder:"Full Name",value:f.name,onChange:N,required:!0,disabled:p}),(0,s.jsx)(l.I,{name:"email",type:"email",placeholder:"Email",value:f.email,onChange:N,required:!0,disabled:p}),(0,s.jsx)(l.I,{name:"mobile",placeholder:"Mobile Number",value:f.mobile,onChange:N,required:!0,disabled:p}),y&&(0,s.jsx)("div",{className:"text-red-600 text-sm",children:y}),(0,s.jsx)(i.z,{type:"submit",className:"w-full",disabled:p,children:p?"Registering...":"Register"})]})]})})}},12609:function(e,a,t){"use strict";t.d(a,{$N:function(){return h},Be:function(){return x},Vq:function(){return o},cZ:function(){return u},fK:function(){return p},hg:function(){return c}});var s=t(57437),r=t(2265),n=t(28712),i=t(82549),l=t(39311);let o=n.fC,c=n.xz,d=n.h_;n.x8;let m=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(n.aV,{ref:a,className:(0,l.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...r})});m.displayName=n.aV.displayName;let u=r.forwardRef((e,a)=>{let{className:t,children:r,...o}=e;return(0,s.jsxs)(d,{children:[(0,s.jsx)(m,{}),(0,s.jsxs)(n.VY,{ref:a,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...o,children:[r,(0,s.jsxs)(n.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(i.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});u.displayName=n.VY.displayName;let p=e=>{let{className:a,...t}=e;return(0,s.jsx)("div",{className:(0,l.cn)("flex flex-col space-y-1.5 text-center sm:text-left",a),...t})};p.displayName="DialogHeader";let h=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(n.Dx,{ref:a,className:(0,l.cn)("text-lg font-semibold leading-none tracking-tight",t),...r})});h.displayName=n.Dx.displayName;let x=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(n.dk,{ref:a,className:(0,l.cn)("text-sm text-muted-foreground",t),...r})});x.displayName=n.dk.displayName},51908:function(e,a,t){"use strict";t.d(a,{I:function(){return i}});var s=t(57437),r=t(2265),n=t(39311);let i=r.forwardRef((e,a)=>{let{className:t,type:r,...i}=e;return(0,s.jsx)("input",{type:r,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:a,...i})});i.displayName="Input"},66672:function(e,a,t){"use strict";t.d(a,{_:function(){return c}});var s=t(57437),r=t(2265),n=t(36743),i=t(96061),l=t(39311);let o=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)(n.f,{ref:a,className:(0,l.cn)(o(),t),...r})});c.displayName=n.f.displayName},16775:function(e,a,t){"use strict";t.d(a,{Z:function(){return l}});var s=t(57437),r=t(2265),n=t(26823),i=t(39311);let l=r.forwardRef((e,a)=>{let{className:t,orientation:r="horizontal",decorative:l=!0,...o}=e;return(0,s.jsx)(n.f,{ref:a,decorative:l,orientation:r,className:(0,i.cn)("shrink-0 bg-border","horizontal"===r?"h-[1px] w-full":"h-full w-[1px]",t),...o})});l.displayName=n.f.displayName},55771:function(e,a,t){"use strict";t.d(a,{g:function(){return i}});var s=t(57437),r=t(2265),n=t(39311);let i=r.forwardRef((e,a)=>{let{className:t,...r}=e;return(0,s.jsx)("textarea",{className:(0,n.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:a,...r})});i.displayName="Textarea"},62621:function(e,a,t){"use strict";t.d(a,{Am:function(){return d}}),t(2265);let s=0,r=new Map,n=e=>{if(r.has(e))return;let a=setTimeout(()=>{r.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);r.set(e,a)},i=(e,a)=>{switch(a.type){case"ADD_TOAST":return{...e,toasts:[a.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===a.toast.id?{...e,...a.toast}:e)};case"DISMISS_TOAST":{let{toastId:t}=a;return t?n(t):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===t||void 0===t?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===a.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==a.toastId)}}},l=[],o={toasts:[]};function c(e){o=i(o,e),l.forEach(e=>{e(o)})}function d(e){let{...a}=e,t=(s=(s+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>c({type:"DISMISS_TOAST",toastId:t});return c({type:"ADD_TOAST",toast:{...a,id:t,open:!0,onOpenChange:e=>{e||r()}}}),{id:t,dismiss:r,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:t}})}}},24272:function(e,a,t){"use strict";function s(e){return"₹".concat(new Intl.NumberFormat("en-US").format(e))}t.d(a,{x:function(){return s}})}},function(e){e.O(0,[7533,7245,6691,4962,1080,1653,7856,6037,3230,2971,7864,1744],function(){return e(e.s=58725)}),_N_E=e.O()}]);